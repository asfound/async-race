var Mt=Object.defineProperty;var xt=(t,e,n)=>e in t?Mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var g=(t,e,n)=>xt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const R="https://rsschool.shubbush.xyz/async-race/",_={GARAGE:"/garage",ENGINE:"/engine",WINNERS:"/winners"},M={PAGE:"_page",LIMIT:"_limit",SORT:"_sort",ORDER:"_order"},U={CONTENT_TYPE:"Content-Type",X_TOTAL_COUNT:"X-Total-Count"},z={JSON:"application/json"},D={DELETE:"DELETE",PATCH:"PATCH",POST:"POST",PUT:"PUT"},O={OK:200,CREATED:201,INTERNAL_SERVER_ERROR:500},A={GET_CAR:"Failed to retrieve car.",CREATE_CAR:"Failed to create car.",DELETE_CAR:"Failed to delete car.",UPDATE_CAR:"Failed to update car.",START:"Failed to start engine.",STOP:"Failed to stop car.",CREATE_WINNER:"Failed to create winner.",UPDATE_WINNER:"Failed to update winner.",UNKNOWN:"Unknown error",NOT_ARRAY:"Object is not array",NOT_SVG:"Parsed SVG is not a valid SVGElement",NOT_CAR_PROPERTIES:"Not valid CarItemProperties values",NOT_ENGINE_PROPERTIES:"Not valid StartEngineProperties values",NOT_WINNER_PROPERTIES:"Not valid WinnerProperties values"},at={STARTED:"started",DRIVE:"drive",STOPPED:"stopped"},E={BUTTON:"button",DIALOG:"dialog",DIV:"div",FORM:"form",H1:"h1",INPUT:"input",LI:"li",MAIN:"main",P:"p",SECTION:"section",SPAN:"span",SVG:"svg",TABLE:"table",TBODY:"tbody",THEAD:"thead",TD:"td",TH:"th",TR:"tr",UL:"ul"},At={BUTTON:"button",SUBMIT:"submit"},p={GARAGE:"Garage",WINNERS:"Winners",ADD_CAR:"Add Car",NEXT:"Next",PREVIOUS:"Previous",EDIT:"Edit",DELETE:"Delete",RETURN:"Return",START:"Start",SAVE:"Save",ID:"ID",TIME:"Time",WINS:"Wins"},Ut={ASC:"Sort ▼",DESC:"Sort ▲"},St={GARAGE:"Garage",WINNERS:"Winners"},gt={CARS:"Total cars: ",WINNERS:"Total winners: "},Bt={NAME:"Enter car name..."},Ft=["№","Car","ID","Name","Wins","Best time"],ut=["red","green","blue"],B={MIN:0,MAX_RANDOM:250,MAX:255,OFFSET:1},Z={WIDTH:"width",HEIGHT:"height",FILL:"fill"},mt={TEXT:"text",COLOR:"color"},H={WIDTH:"62",HEIGHT:"45"},dt={WIDTH:"31",HEIGHT:"22"},Et={EASING:"ease-in-out",FILL:"forwards"},Vt={SVG:"image/svg+xml"},ft="",b=0,y=1,w=1,Yt="#FFE338",k=7,kt=16,Xt=2,zt="0",Kt=1e3,pt=2,jt=1,Rt=10,Q={ID:"id",NAME:"name",COLOR:"color"},Ct={VELOCITY:"velocity",DISTANCE:"distance"},tt={ID:"id",WINS:"wins",TIME:"time"},Tt={Pussla:["Model X","Model S","Model 3","Model Y","Cybertruck"],BMeoW:["i3","i4","i8","M4","X5"],Meowdi:["A3","A4","Q7","Q5","e-tron"],Murcedes:["A-Class","C-Class","E-Class","S-Class","GLC"],Furd:["Mustang","F-150","Explorer","Focus","Bronco"],Nekoyota:["Camry","Corolla","Highlander","RAV4","Prius"],Chevrocat:["Malibu","Impala","Tahoe","Silverado","Bolt EV"],Catswagen:["Golf","Pussat","Tiguan","ID.4","Beetle"],Nyanssan:["Altima","Maxima","370Z","Leaf","Rogue"],Subeowru:["Outback","Impreza","Forester","Crosstrek","Legacy"],Purrari:["488 GTB","Portofino","LaFerrari","F8 Tributo","GTC4Lusso"],Murgatti:["Chiron","Veyron","Divo","Bolide","Purr Sport"]};function qt(t){return t!=null}function Jt(t){if(!(t instanceof SVGElement))throw new TypeError(A.NOT_SVG)}function _t(t){return typeof t!="object"||t===null||!(Q.ID in t)||!(Q.NAME in t)||!(Q.COLOR in t)?!1:typeof t.id=="number"||typeof t.name=="string"||typeof t.color=="string"}function Zt(t){if(!_t(t))throw new TypeError(A.NOT_CAR_PROPERTIES)}function Qt(t){if(!Array.isArray(t)||!t.every(e=>_t(e)))throw new TypeError(`${A.NOT_CAR_PROPERTIES} or ${A.NOT_ARRAY}`)}function t0(t){return typeof t!="object"||t===null||!(Ct.VELOCITY in t)||!(Ct.DISTANCE in t)?!1:typeof t.velocity=="number"||typeof t.distance=="number"}function e0(t){if(!t0(t))throw new TypeError(A.NOT_ENGINE_PROPERTIES)}function ht(t){return typeof t!="object"||t===null||!(tt.ID in t)||!(tt.WINS in t)||!(tt.TIME in t)?!1:typeof t.id=="number"||typeof t.wins=="number"||typeof t.time=="number"}function n0(t){if(!ht(t))throw new TypeError(A.NOT_WINNER_PROPERTIES)}function r0(t){if(!Array.isArray(t)||!t.every(e=>ht(e)))throw new TypeError(`${A.NOT_WINNER_PROPERTIES} or ${A.NOT_ARRAY}`)}function T(t){return function(n,r,s){const o=document.createElement(t);if(n&&Object.assign(o,n),s)for(const[a,i]of Object.entries(s))o.setAttribute(a,i);return r&&o.append(...r.filter(a=>qt(a))),o}}const s0=T(E.BUTTON),o0=T(E.DIALOG),h=T(E.DIV),a0=T(E.FORM),It=T(E.H1),Pt=T(E.INPUT),i0=T(E.LI),c0=T(E.MAIN),V=T(E.P),l0=T(E.SECTION),u0=T(E.SPAN),d0=T(E.TABLE),E0=T(E.TBODY),C0=T(E.THEAD),$=T(E.TD),T0=T(E.TH),Gt=T(E.TR),N0=T(E.UL),A0="_main_asos4_1",S0={main:A0};var C=(t=>(t[t.PAGE_CHANGE=0]="PAGE_CHANGE",t[t.COUNT_CHANGE=1]="COUNT_CHANGE",t[t.GARAGE_STATUS_CHANGE=2]="GARAGE_STATUS_CHANGE",t[t.WINNERS_PAGE_CHANGE=3]="WINNERS_PAGE_CHANGE",t[t.APP_PAGE_CHANGE=4]="APP_PAGE_CHANGE",t))(C||{}),x=(t=>(t[t.STATUS_CHANGE=0]="STATUS_CHANGE",t[t.PROPERTIES_CHANGE=1]="PROPERTIES_CHANGE",t))(x||{}),L=(t=>(t.ID="id",t.WINS="wins",t.TIME="time",t))(L||{}),F=(t=>(t.ASC="ASC",t.DESC="DESC",t))(F||{}),S=(t=>(t[t.RACING=0]="RACING",t[t.READY=1]="READY",t[t.CARS_LEFT=2]="CARS_LEFT",t))(S||{}),m=(t=>(t[t.RACING=0]="RACING",t[t.ON_START=1]="ON_START",t[t.DRIVING=2]="DRIVING",t[t.FINISHED=3]="FINISHED",t[t.ENGINE_BROKEN=4]="ENGINE_BROKEN",t))(m||{});function X(t,e,n,r){const a=new DOMParser().parseFromString(t,Vt.SVG).querySelector(E.SVG);return Jt(a),a.setAttribute(Z.WIDTH,n),a.setAttribute(Z.HEIGHT,r),a.setAttribute(Z.FILL,e),a}const it=`<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 251.423 180.787">
    <g transform="matrix(-3.07432, 0, 0, 3.07432, 287.638, -69.7525)" style="">
        <path
            d="m56.645 22.887c-0.79688 0.29297-2.4883 1.3438-4.9414 3.0898-0.33203 0.23438-0.64062 0.43359-0.67578 0.43359s-0.34766-0.09375-0.6875-0.20703c-2.2148-0.75-5.4648-1.5273-7.6836-1.8438-2.25-0.31641-3.4492-0.39453-6.6992-0.43359-3.0352-0.03125-3.7969 0.003907-4.9531 0.23828-1.9883 0.41016-5.2344 1.5352-7.293 2.5312-0.97266 0.46875-1.5469 0.79688-2.2852 1.3086l-0.48047 0.32422-0.58203-0.39062c-1.7148-1.1445-4.875-3.0195-6.25-3.7148-0.86328-0.43359-1.2031-0.5-1.6055-0.30859-0.45312 0.21875-0.66016 0.77734-0.71875 1.9062-0.042968 0.78125 0.050782 1.5898 0.39453 3.2969 0.29297 1.4492 1.1055 4.7344 1.543 6.25 0.44141 1.5273 0.43359 1.3906 0.20703 2.0312-0.64062 1.8164-1.0469 3.7031-1.1836 5.4961-0.16016 2.1133 0.26562 5.5938 0.89453 7.3438 0.42188 1.1719 1.6445 3.2383 3.0039 5.0781 0.48047 0.65234 1.3242 1.5156 1.7969 1.8477 0.16797 0.11328 0.50391 0.37109 0.75391 0.56641 0.25 0.19141 0.58203 0.44141 0.73828 0.55078 1.5625 1.0586 4.5898 2.168 7.9805 2.918l0.51172 0.11328-0.23438 0.28125c-0.54687 0.67578-0.89453 1.3906-1.0508 2.1562-0.09375 0.47266-0.10547 2.0469-0.019531 2.8906 0.19141 1.8164 0.75 3.4336 1.6758 4.8438 0.85938 1.3086 2.875 2.9805 4.2305 3.5117 0.20703 0.078125 0.58203 0.20312 0.83984 0.26562l0.45703 0.125-0.03125 0.18359c-0.066406 0.40234-0.097656 3.6719-0.035156 3.9844 0.074219 0.37891 0.25391 0.63672 0.56641 0.76953 0.69922 0.3125 1.3398-0.33203 1-1.0039-0.12109-0.23047-0.12109-0.23437-0.082031-1.8945 0.019531-0.91797 0.050781-1.6836 0.074218-1.6992 0.019532-0.019531 0.4375 0.03125 0.92188 0.11328 0.92578 0.16016 4.0938 0.62109 5.0195 0.73047l0.53516 0.0625-0.03125 0.52734c-0.015625 0.29297-0.046875 1.2461-0.0625 2.1211-0.03125 1.4531-0.027344 1.6094 0.058594 1.7852 0.1875 0.39062 0.57812 0.53125 0.98438 0.34766 0.42578-0.1875 0.43359-0.22266 0.49609-2.5508 0.03125-1.0977 0.0625-2.0117 0.078124-2.0195 0.011719-0.011719 0.45703 0.027344 1 0.089844 4.7148 0.51172 8 0.54297 12.859 0.12891 2.0625-0.17578 5.0352-0.5 7.6875-0.83203 0.5625-0.074219 1.0508-0.12891 1.0938-0.12891 0.0625 0 0.089843 0.375 0.16016 2.293 0.09375 2.5469 0.097656 2.5625 0.45703 2.8008 0.14453 0.097657 0.23047 0.12109 0.43359 0.097657 0.29688-0.027344 0.48438-0.15234 0.625-0.41797 0.097656-0.19141 0.097656-0.23438 0.015625-2.2656-0.046875-1.1367-0.082032-2.2188-0.082032-2.4062v-0.34375l0.64063-0.09375c1.8242-0.26562 3.0977-0.55859 4.0469-0.94141 0.38672-0.15234 0.71484-0.26562 0.73047-0.25391 0.03125 0.035157 0.035157 2.8086 0 3.9023-0.027343 0.79688-0.019531 0.84375 0.09375 1.0195 0.375 0.60547 1.2188 0.41016 1.3711-0.3125 0.074219-0.34375 0.097656-4.125 0.03125-4.9023l-0.042969-0.5 0.22266-0.125c0.57422-0.3125 1.8594-1.1055 2.5664-1.5781 2.0039-1.332 2.9531-2.1875 3.4062-3.0586 0.39062-0.75 0.70312-1.9648 0.92188-3.543 0.125-0.90625 0.125-2.5508 0-3.2539-0.35547-1.9961-1.4844-3.6758-3.5586-5.2812-0.23828-0.18359-0.43359-0.35547-0.43359-0.375 0-0.046875 0.73828-0.74609 1.418-1.3398 1.3867-1.2031 2.8086-2.2539 3.4258-2.5273 0.3125-0.14062 1.0156-0.37109 1.293-0.41797l0.16797-0.035156-0.20312 0.27734c-0.40234 0.52734-0.40234 1-0.011719 1.3555 0.32812 0.29688 0.70703 0.35547 1.4805 0.23828 0.90625-0.13672 1.5312-0.35938 1.8281-0.65234 0.24609-0.24609 0.3125-0.43359 0.31641-0.82813 0-0.30078-0.027344-0.42187-0.16797-0.71484l-0.16016-0.34766 0.55078-0.38672c1.4727-1.0273 2.5586-1.4492 4.0352-1.5664 0.67188-0.050782 0.84375-0.082032 0.96484-0.16797 0.21484-0.16016 0.33203-0.42188 0.30859-0.69141-0.03125-0.26562-0.15625-0.45312-0.40234-0.58984-0.16797-0.09375-0.25-0.097657-0.90625-0.074219-0.8125 0.035156-1.2852 0.12109-1.9805 0.35547-1.1445 0.37891-2.1445 0.92578-3.2617 1.7656l-0.65625 0.5-0.70312-0.027344c-1.4258-0.046875-2.793 0.33203-3.9844 1.1094-1.0938 0.71484-2.9688 2.2461-4.0117 3.2812l-0.6875 0.67578-0.74609-0.375c-1.9961-1.0039-5.043-2.0273-7.418-2.4844-1.7656-0.33984-2.9258-0.41016-6.4688-0.41797-1.6367-0.003906-2.9883-0.019531-3.0117-0.042968-0.015625-0.015625 0.035156-0.16797 0.12109-0.33984 0.44141-0.875 1.043-2.4805 1.2852-3.4531 0.40234-1.5898 0.59766-3.125 0.63672-4.9023 0.0625-2.9688-0.29297-4.875-1.4023-7.5195l-0.26172-0.625 0.10938-1.0938c0.21875-2.1719 0.26953-4.1211 0.16016-6.043-0.21484-3.6289-0.59766-4.9883-1.5664-5.5195-0.23438-0.125-0.35547-0.15625-0.72266-0.16797-0.37109-0.015625-0.5 0-0.80078 0.10938zm0.96484 1.5938c0.34375 0.65625 0.59766 2.7148 0.65625 5.2344 0.03125 1.3867-0.015625 3.2539-0.082031 3.2539-0.015625 0-0.1875-0.26562-0.37891-0.59375-0.42578-0.71875-1.0508-1.5977-1.5664-2.207-0.84766-0.99609-2.1367-2.125-3.0977-2.7227l-0.47266-0.29297 0.24609-0.17188c1.6094-1.1406 3.0742-2.082 3.8125-2.457 0.59375-0.30859 0.75-0.3125 0.89063-0.042969zm-17.973 1.0625c2.5312 0.20312 4.7148 0.56641 7.082 1.1836 1.0117 0.26563 2.6055 0.71875 2.7031 0.77734 0.050781 0.027344-0.16797 0.20703-0.73047 0.60547-0.4375 0.3125-0.85547 0.65234-0.91797 0.74609-0.28516 0.42188-0.046876 1.0312 0.44141 1.1289 0.33203 0.066406 0.5-0.019531 1.7344-0.89453 0.67188-0.48047 1.2461-0.87891 1.2812-0.89062 0.09375-0.035157 1.0352 0.47266 1.5352 0.83203 1.3281 0.95312 2.4531 2.1445 3.4023 3.6055 0.49609 0.76562 0.76172 1.2383 1.2852 2.293l0.44141 0.88672-0.027343 0.47266c-0.015626 0.375-0.003907 0.50391 0.0625 0.64063 0.09375 0.17187 0.35937 0.37109 0.51172 0.37109 0.097656 0 0.30859 0.51562 0.58984 1.4414 0.21484 0.6875 0.35547 1.3555 0.48047 2.2539 0.12891 0.94922 0.12891 3.5898 0 4.6094-0.34375 2.5977-0.83984 4.207-2.0039 6.5039-0.82422 1.6211-1.5352 2.6562-2.4805 3.6055-0.70703 0.71484-1.3477 1.1406-2.6602 1.793-2.7773 1.375-5.9375 2.4023-8.8555 2.8867-2.1289 0.35547-3.1094 0.42188-5.8594 0.42188-2.8086-0.003906-3.8477-0.082031-6.3281-0.5-4.0586-0.67188-7.3164-1.6094-9.5625-2.7344-0.71875-0.35938-1.0195-0.55859-1.7812-1.1836-0.32422-0.26563-0.71875-0.57422-0.87891-0.68359-0.50391-0.33203-1.1406-1.1055-2.1133-2.5625-1.3906-2.082-1.9688-3.2773-2.25-4.6289-0.23047-1.0938-0.44922-2.8086-0.5-3.9492-0.074219-1.5469 0.21484-3.6758 0.71484-5.3711l0.10938-0.35938 0.31641 0.34375c0.22266 0.23438 0.37891 0.35547 0.51562 0.39062 0.5625 0.15234 1.0742-0.33984 0.92188-0.88672-0.027344-0.10938-0.20703-0.39062-0.40234-0.63672-0.23437-0.28516-0.40234-0.5625-0.5-0.8125-0.17578-0.45313-0.1875-0.41016 0.32422-1.4531 0.39062-0.79687 1.0469-1.8086 1.707-2.6367 0.5625-0.69922 1.7305-1.8789 2.4648-2.4844l0.54297-0.44922 0.43359 0.31641c0.62891 0.46875 0.79688 0.55859 1.0508 0.55859 0.44141 0 0.73828-0.29297 0.73828-0.73047 0-0.31641-0.12891-0.51172-0.54297-0.80859-0.1875-0.13672-0.34375-0.26563-0.34375-0.28516 0-0.027343 0.23047-0.1875 0.51172-0.36328 2.207-1.3906 7.2969-3.2148 9.6133-3.4375 0.76953-0.074219 6.043-0.019531 7.2188 0.074219zm-24.062 1.2188c1.293 0.75 2.4414 1.4531 3.4219 2.0898l0.6875 0.44922-0.57422 0.49609c-1.418 1.2148-2.9688 3.0469-3.7812 4.4688-0.12891 0.23438-0.23047 0.36328-0.24609 0.31641-0.058593-0.15234-0.35547-1.2812-0.68359-2.6055-0.83203-3.3281-1.207-5.457-1.0977-6.2148l0.035157-0.24609 0.55859 0.29688c0.30859 0.16797 1.0625 0.59375 1.6758 0.94922zm49.027 27.25c2.8008 0.12109 4.4062 0.40625 7.0938 1.2852 1.4375 0.47266 2.582 0.92578 3.5312 1.3945l0.69922 0.34766-0.25 0.56641c-0.14062 0.3125-0.32812 0.78516-0.42188 1.0508-0.15625 0.4375-0.17188 0.53125-0.17188 1.0898 0 0.65625 0.035157 0.76172 0.34766 0.99609 0.16797 0.125 0.53125 0.13672 0.76172 0.015624 0.26953-0.14062 0.375-0.35937 0.375-0.80859 0-0.28125 0.042969-0.49609 0.15234-0.83203 0.20312-0.60938 0.47266-1.2031 0.54688-1.2031 0.09375 0.003907 0.96484 0.73047 1.4375 1.2031 1.0586 1.0586 1.6406 2.0898 1.8594 3.293 0.10547 0.58203 0.11328 1.957 0.019531 2.7188-0.16797 1.3398-0.46875 2.5742-0.77734 3.1758-0.34766 0.69141-1.9336 1.9492-4.2305 3.3438-0.90234 0.54687-0.81641 0.51953-0.88672 0.28125-0.058594-0.22266-0.33203-0.50391-0.55078-0.55859-0.3125-0.078125-0.65625 0.074218-0.83203 0.36328-0.074219 0.125-0.082032 0.23438-0.058594 0.67578l0.03125 0.53125-0.55859 0.24609c-0.83984 0.36328-1.0664 0.44922-1.75 0.61328-0.5625 0.13672-2.6758 0.51562-2.8789 0.51562-0.0625 0-0.074219-0.050781-0.042969-0.3125 0.03125-0.26172 0.015625-0.34766-0.078125-0.54688-0.26953-0.5625-1-0.57812-1.3242-0.03125-0.0625 0.10938-0.10547 0.31641-0.12891 0.64453l-0.03125 0.48047-1.3281 0.16797c-1.9961 0.25391-5.3633 0.62109-7.0039 0.76562-3.0664 0.27734-3.8438 0.3125-6.3789 0.3125-2.6055 0.003906-3.2773-0.03125-6.2969-0.33203-0.84375-0.089844-1.5508-0.15625-1.582-0.15625-0.066406 0-0.003906-0.51172 0.10547-0.84375 0.10547-0.33203 0.035156-0.59375-0.21875-0.81641-0.15625-0.13672-0.23047-0.16016-0.45703-0.16016-0.54688 0-0.83203 0.35547-0.93359 1.1406-0.03125 0.26953-0.082031 0.47266-0.11328 0.47266-0.089844 0-2.2969-0.30078-3.4688-0.47266-1.3164-0.19141-2.8125-0.44922-2.8477-0.48438-0.0625-0.058593 0.097656-0.55078 0.26953-0.83984 0.16797-0.27734 0.1875-0.34375 0.16797-0.58984-0.035157-0.47266-0.41797-0.75391-0.90625-0.66016-0.34766 0.0625-0.82813 0.71875-0.95313 1.3008-0.027343 0.14453-0.0625 0.3125-0.078124 0.375l-0.027344 0.10938-0.375-0.10547c-0.67578-0.19141-1.4258-0.62891-2.3633-1.3867-1.793-1.4414-2.7656-3.3008-3.043-5.8164-0.066406-0.65625-0.074219-2.1523 0-2.5273 0.089844-0.47266 0.41797-1.0664 0.96875-1.7344 0.27734-0.33203 0.53516-0.60938 0.57812-0.60938s0.48828 0.066406 0.99609 0.15625c2.1992 0.36328 3.4102 0.46875 5.875 0.50391 3.6094 0.050782 6.2812-0.23047 9.2539-0.98047 2.9102-0.73047 6.6289-2.25 8.418-3.4375 1.2031-0.79688 2.25-1.9258 3.1875-3.4336l0.30859-0.49609 2.5664-0.011718c1.4062-0.011719 3.1211 0.011718 3.8008 0.035156z" />
        <path
            d="m30.676 37.191c-0.48438 0.082032-0.95312 0.44922-1.1992 0.93359-0.33984 0.67578-0.67578 2.0195-0.67578 2.707 0 0.72266 0.45703 1.168 1.1992 1.1602 0.51953-0.003907 0.76172-0.14063 1.4023-0.79297 0.84766-0.87109 1.043-1.2305 1.1523-2.1367 0.089843-0.70703 0.015624-0.98047-0.34766-1.3711-0.16797-0.17188-0.36328-0.32422-0.48047-0.35938-0.3125-0.10547-0.85547-0.18359-1.0469-0.14453z" />
        <path
            d="m42.777 38.02c-0.3125 0.097657-0.5 0.34375-0.69922 0.91016-0.16016 0.47266-0.17578 0.56641-0.16797 1.0664 0.003906 0.45703 0.03125 0.62891 0.17188 1.0664 0.09375 0.28516 0.22266 0.625 0.28516 0.75391 0.47266 0.9375 1.6289 1.1562 2.207 0.42188 0.33203-0.41797 0.4375-0.73828 0.46484-1.4375 0.027344-0.73438-0.03125-1.0156-0.36328-1.6562-0.25391-0.48828-0.60938-0.87891-0.93359-1.0195-0.28516-0.125-0.73828-0.17578-0.96875-0.10938z" />
        <path
            d="m36.109 41.457c-0.72266 0.14453-1.4531 0.97266-1.6367 1.8594-0.20312 0.98828 0.41016 2.1836 1.2969 2.5156 0.25391 0.097657 0.37109 0.10938 0.84375 0.089844 0.87891-0.035156 1.5664-0.35547 2.0039-0.92188 0.32422-0.42188 0.39062-0.60547 0.39062-1.0625 0-1.2031-0.94141-2.3125-2.1094-2.4805-0.41797-0.058593-0.48828-0.058593-0.79297 0zm0.64062 1.5117c0.15625 0 0.55078 0.35547 0.67188 0.60547 0.046875 0.097656 0.078125 0.25391 0.066406 0.34766-0.015625 0.14453-0.058593 0.18359-0.34766 0.33984-0.28125 0.14453-0.37891 0.16797-0.625 0.15625-0.26172-0.015625-0.29688-0.03125-0.40234-0.1875-0.0625-0.09375-0.12891-0.26562-0.15234-0.37891-0.0625-0.37891 0.33984-1 0.58984-0.90625 0.042969 0.015626 0.12891 0.027344 0.19922 0.027344z" />
        <path
            d="m49.281 44.047c-0.097656 0.046875-0.84766 0.76953-1.668 1.6133-2.0664 2.1211-2.9492 2.9023-4.1914 3.7188-0.73438 0.48047-1.2227 0.73828-1.9883 1.0508-1.2695 0.51953-2.4727 0.87891-3.543 1.0625-0.81641 0.13672-2.9805 0.13672-3.6211 0-1.7656-0.37891-4.332-2.1133-5.9102-4-0.20703-0.25-0.78125-1.0312-1.2773-1.7383-0.56641-0.8125-0.95703-1.3242-1.0586-1.3867-0.34766-0.20703-0.875-0.078126-1.0508 0.26172-0.11328 0.22266-0.097656 0.56641 0.03125 0.78516 0.25 0.41016 1.7461 2.5195 2.0586 2.9023 1.4375 1.7344 3.6094 3.4023 5.5039 4.207 1.1445 0.48828 2.0586 0.62891 3.8594 0.58203 1.5508-0.035157 2.4414-0.19141 4.0039-0.69141 2.4023-0.76953 4.0195-1.7031 6-3.4648 0.69141-0.60938 3.7852-3.7188 3.875-3.8945 0.09375-0.17578 0.089843-0.52734-0.015626-0.72266-0.17578-0.34375-0.63672-0.47266-1.0117-0.28516z" />
    </g>
</svg>`,g0=`<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 80.1087" width="90px" height="80.1087px">
    <g
        transform="matrix(0.9999999999999999, 0, 0, 0.9999999999999999, -5.000000953674316, -9.945650100708036)"
        id="object-0">
        <g>
            <path
                d="M14.00448,90.05435l3.4542-23.12704c-8.04179-6.28423-12.45868-14.52373-12.45868-23.28625C5,25.06137,25.18666,9.94565,49.99885,9.94565c24.81391,0,45.00115,15.11514,45.00115,33.69425,0,18.57739-20.18666,33.69138-44.99885,33.69138h-.06552c-3.47661,0-6.97507-.30806-10.40743-.91671l-25.52372,13.63978ZM49.99885,12.89638C26.81318,12.89638,7.95073,26.68846,7.95073,43.64105c0,8.06191,4.25424,15.68413,11.97935,21.46144l.70578,.52819-2.84612,19.05557,21.25798-11.36093,.50865,.09483c3.41799,.63739,6.9107,.96039,10.38042,.96039h.06265c23.18739,0,42.04985-13.79036,42.04985-30.74065,0-16.95202-18.86361-30.74352-42.05042-30.74352Z"
                style="fill: rgb(244, 244, 244);" />
        </g>
        <polygon
            points="65.78816 29.93863 63.70185 27.85232 50.00144 41.55273 36.30102 27.85232 34.21471 29.93863 47.91512 43.63904 34.21471 57.33946 36.30102 59.42577 50.00144 45.72536 63.70185 59.42577 65.78816 57.33946 52.08775 43.63904 65.78816 29.93863" />
    </g>
</svg>`,m0="_icon_65rxz_1",f0="_hidden_65rxz_5",Y={icon:m0,hidden:f0};function p0(t){const e=h({className:Y.icon}),{color:n}=t.getState().properties,r=X(it,n,H.WIDTH,H.HEIGHT),s=X(g0,n,dt.WIDTH,dt.HEIGHT);s.classList.add(Y.hidden);const o=()=>{s.classList.remove(Y.hidden)},a=()=>{s.classList.add(Y.hidden)};return e.append(r,s),t.subscribe(x.STATUS_CHANGE,i=>{i.currentStatus===m.ENGINE_BROKEN&&o(),i.currentStatus===m.ON_START&&a()}),e}const R0="_item_1ge46_1",_0="_name_1ge46_10",h0="_track_1ge46_17",et={item:R0,name:_0,track:h0};class Ot{constructor(){g(this,"events",new Map)}subscribe(e,n){var r;this.events.has(e)||this.events.set(e,[]),(r=this.events.get(e))==null||r.push(n)}unsubscribe(e,n){const r=this.events.get(e);r&&this.events.set(e,r.filter(s=>s!==n))}unsubscribeAll(){this.events.clear()}emit(e,n){const r=this.events.get(e);if(r)for(const s of r)s(n)}}function I0(t){const e={...t},n=new Ot;return{getState:()=>e,setStatus:r=>{e.currentStatus=r,n.emit(x.STATUS_CHANGE,e)},editCar:(r,s)=>{e.properties.name=r,e.properties.color=s,n.emit(x.PROPERTIES_CHANGE,e)},subscribe:(r,s)=>{n.subscribe(r,s)}}}function P0(t,e){let n=null;function r(a){n==null||n.cancel(),n=t.animate([{transform:`translateX(${String(b)})`},{transform:`translateX(${String(e())}px)`}],{duration:a,easing:Et.EASING,fill:Et.FILL})}function s(){n==null||n.pause()}function o(){n==null||n.cancel()}return{drive:r,pause:s,stop:o}}class bt extends Error{constructor(n,r){super();g(this,"statusCode");this.statusCode=n,this.message=r}}async function G0(t){const e=new URLSearchParams({[M.PAGE]:t.toString(),[M.LIMIT]:k.toString()});try{const n=await fetch(`${R}${_.GARAGE}?${e.toString()}`),r=await n.json();Qt(r);const s=Number(n.headers.get(U.X_TOTAL_COUNT))||b;return{cars:r,totalCount:s}}catch{return{cars:[],totalCount:b}}}async function O0(t){const e=await fetch(`${R}${_.GARAGE}/${String(t)}`),n=await e.json();if(e.status!==O.OK)throw new Error(A.GET_CAR);return Zt(n),n}async function b0(t,e){const n=await fetch(`${R}${_.GARAGE}`,{method:D.POST,body:JSON.stringify({name:t,color:e}),headers:{[U.CONTENT_TYPE]:z.JSON}});if(n.status!==O.CREATED)throw new Error(A.CREATE_CAR);return n.json()}async function w0(t){if((await fetch(`${R}${_.GARAGE}/${String(t)}`,{method:D.DELETE})).status!==O.OK)throw new Error(A.DELETE_CAR)}async function D0(t){const e=await fetch(`${R}${_.GARAGE}/${String(t.id)}`,{method:D.PUT,headers:{[U.CONTENT_TYPE]:z.JSON},body:JSON.stringify({name:t.name,color:t.color})});if(e.status!==O.OK)throw new Error(A.UPDATE_CAR);return e.json()}async function y0(t){const e=new URLSearchParams({id:t.toString(),status:at.STARTED}),n=await fetch(`${R}${_.ENGINE}?${e.toString()}`,{method:D.PATCH});if(n.status!==O.OK)throw new Error(A.START);const r=await n.json();return e0(r),r}async function L0(t,e){const n=new URLSearchParams({id:t.toString(),status:at.DRIVE}),r=await fetch(`${R}${_.ENGINE}?${n.toString()}`,{method:D.PATCH,signal:e});if(r.status!==O.OK){const s=await r.text();throw new bt(r.status,s)}}async function W0(t){const e=new URLSearchParams({id:t.toString(),status:at.STOPPED});if((await fetch(`${R}${_.ENGINE}?${e.toString()}`,{method:D.PATCH})).status!==O.OK)throw new Error(A.STOP)}async function H0(t,e,n){const r=new URLSearchParams({[M.PAGE]:t.toString(),[M.LIMIT]:Rt.toString(),[M.SORT]:e,[M.ORDER]:n});try{const s=await fetch(`${R}${_.WINNERS}?${r.toString()}`),o=await s.json();r0(o);const a=Number(s.headers.get(U.X_TOTAL_COUNT))||b;return{winners:o,totalWinners:a}}catch{return{winners:[],totalWinners:b}}}async function v0(t){const n=await(await fetch(`${R}${_.WINNERS}/${String(t)}`)).json();return n0(n),n}async function $0(t,e){const n=await fetch(`${R}${_.WINNERS}`,{method:D.POST,body:JSON.stringify({id:t,time:e,wins:jt}),headers:{[U.CONTENT_TYPE]:z.JSON}});if(n.status!==O.CREATED)throw new Error(A.CREATE_WINNER);return n.json()}async function M0(t){return(await fetch(`${R}${_.WINNERS}/${String(t)}`,{method:D.DELETE})).json()}async function x0(t){const e=await fetch(`${R}${_.WINNERS}/${String(t.id)}`,{method:D.PUT,headers:{[U.CONTENT_TYPE]:z.JSON},body:JSON.stringify({wins:t.wins,time:t.time})});if(e.status!==O.OK)throw new Error(A.UPDATE_WINNER);return e.json()}const f={getCars:G0,getCar:O0,createCar:b0,deleteCar:w0,updateCar:D0,startCar:y0,driveCar:L0,stopCar:W0,getWinners:H0,getWinner:v0,createWinner:$0,deleteWinner:M0,updateWinner:x0},U0="_button_1vbc8_1",B0={button:U0},N=t=>{const{textContent:e,type:n=At.BUTTON,className:r,onClick:s,disabled:o=!1}=t,a=s0({className:B0.button,textContent:e,type:n});return r&&a.classList.add(r),s&&a.addEventListener("click",s),o&&(a.disabled=!0),a},F0="_modal_16zye_1",V0="_content_16zye_7",Y0="_button_16zye_15",nt={modal:F0,content:V0,button:Y0};function k0(t){const e=o0({className:nt.modal}),n=()=>{e.close(),e.remove()};t.classList.add(nt.content),e.addEventListener("click",s=>{s.target===e&&n()});const r=N({textContent:ft,className:nt.button});return r.addEventListener("click",n),e.append(r,t),e}function ct(t){const e=k0(t);document.body.prepend(e),e.showModal()}function I(t){const e=V({textContent:A.UNKNOWN});t instanceof Error&&(e.textContent=t.message),ct(e)}class X0{constructor(e,n,r,s,o,a){g(this,"id");g(this,"properties");g(this,"item");g(this,"carService");g(this,"animationController");g(this,"carStore");g(this,"abortController");g(this,"store");this.properties=e,this.id=e.id,this.item=n,this.carService=r,this.animationController=s,this.carStore=o,this.abortController=new AbortController,this.store=a}removeCar(){this.carService.removeCar(this.id).catch(I).finally(()=>{this.item.remove()})}returnCar(){return this.abortController.abort(),this.carService.returnCar(this.id).then(()=>{this.animationController.stop(),this.carStore.setStatus(m.ON_START)})}startCar(e){return e?this.carStore.setStatus(m.RACING):this.store.updateGarageStatus(S.CARS_LEFT),f.startCar(this.id).then(n=>{const{velocity:r,distance:s}=n;return s/r}).then(n=>(this.animationController.drive(n),e||this.carStore.setStatus(m.DRIVING),this.abortController=new AbortController,f.driveCar(this.id,this.abortController.signal))).then(()=>{this.carStore.setStatus(m.FINISHED)}).catch(n=>{if(n instanceof bt&&n.statusCode===O.INTERNAL_SERVER_ERROR){if(this.animationController.pause(),this.carStore.setStatus(m.ENGINE_BROKEN),e)throw n}else if(!e&&!(n instanceof DOMException))I(n);else throw n})}updateCar(e,n){this.carService.editCar(this.id,e,n).then(()=>{this.carStore.editCar(e,n)}).catch(I)}}function wt(){const t=Object.keys(Tt),e=t[Math.floor(Math.random()*t.length)],n=Tt[e],r=n[Math.floor(Math.random()*n.length)];return`${e} ${r}`}const z0="_form_14v44_1",K0="_name_14v44_7",j0="_color_14v44_27",q0="_icon_14v44_38",K={form:z0,name:K0,color:j0,icon:q0};function Dt(t,e,n,r,s,o=!1){const a=a0({className:K.form,method:"dialog"}),i=Z0(n),c=Q0(r),u=N({textContent:t,type:At.SUBMIT,disabled:o});if(s===void 0){const l=te(r);c.addEventListener("input",d=>{d.target instanceof HTMLInputElement&&(l.style.fill=d.target.value)}),a.prepend(l)}else J0(i,c,s);return a.addEventListener("submit",()=>{const l=i.value.trim()||wt(),d=c.value;e(l,d)}),a.append(i,c,u),a}function J0(t,e,n){t.addEventListener("input",r=>{var s;r.target instanceof HTMLInputElement&&((s=n.nameInputHandler)==null||s.call(n,r.target.value))}),e.addEventListener("input",r=>{var s;r.target instanceof HTMLInputElement&&((s=n.colorInputHandler)==null||s.call(n,r.target.value))})}function Z0(t){return Pt({className:K.name,type:mt.TEXT,placeholder:Bt.NAME,value:t})}function Q0(t){return Pt({className:K.color,type:mt.COLOR,value:t})}function te(t){const e=X(it,t,H.WIDTH,H.HEIGHT);return e.classList.add(K.icon),e}const ee="_container_1914n_1",ne={container:ee};function re(t,e,n,r){const s=h({className:ne.container}),o=(a,i)=>{s.replaceChildren();const{name:c,color:u}=i.properties,l=i.currentStatus,d=le(l,a.garageStatus),P=se(t,d),W=oe(t,d);s.append(P,W);const j=ae(t,d,e),q=ie((J,$t)=>{t.updateCar(J,$t)},c,u,d);s.append(j,q)};return o(r.getState(),n.getState()),n.subscribe(x.STATUS_CHANGE,a=>{o(r.getState(),a)}),r.subscribe(C.GARAGE_STATUS_CHANGE,a=>{o(a,n.getState())}),s}function se(t,e){return N({textContent:p.START,onClick:()=>{t.startCar(!1).catch(n=>{n instanceof DOMException||I(n)})},disabled:e.isStartDisabled})}function oe(t,e){return N({textContent:p.RETURN,onClick:()=>{t.returnCar()},disabled:e.isReturnDisabled})}function ae(t,e,n){return N({textContent:p.DELETE,onClick:()=>{t.removeCar(),n.removeController(t.id)},disabled:e.isDeleteDisabled})}function ie(t,e,n,r){return N({textContent:p.EDIT,onClick:()=>{const s=Dt(p.SAVE,t,e,n);ct(s)},disabled:r.isDeleteDisabled})}const ce={isStartDisabled:!0,isReturnDisabled:!0,isEditDisabled:!0,isDeleteDisabled:!0};function le(t,e){if(e===S.RACING)return ce;switch(t){case m.RACING:return{isStartDisabled:!0,isReturnDisabled:!0,isEditDisabled:!0,isDeleteDisabled:!0};case m.DRIVING:case m.FINISHED:case m.ENGINE_BROKEN:return{isStartDisabled:!0,isReturnDisabled:!1,isEditDisabled:!1,isDeleteDisabled:!1};case m.ON_START:return{isStartDisabled:!1,isReturnDisabled:!0,isEditDisabled:!1,isDeleteDisabled:!1}}}function ue(t,e,n,r){const s=i0({className:et.item}),o=()=>s.offsetWidth-Number(H.WIDTH),a=I0(de(t)),i=c=>{const{id:u,name:l}=c.properties;n.removeController(u),s.replaceChildren();const d=p0(a),P=P0(d,o),W=new X0(t,s,e,P,a,r);n.addController(W);const j=re(W,n,a,r),q=V({textContent:l,className:et.name}),J=h({className:et.track},[d]);s.append(j,q,J)};return i(a.getState()),a.subscribe(x.PROPERTIES_CHANGE,i),s}function de(t){return{currentStatus:m.ON_START,properties:t}}const Ee="_list_1qo93_1",Ce={list:Ee};function Te(t,e,n){const r=N0({className:Ce.list}),s=({carsOnCurrentPage:o})=>{r.replaceChildren();const a=o.map(i=>ue(i,e,n,t));r.append(...a)};return t.subscribe(C.PAGE_CHANGE,o=>{n.clearControllers(),s(o)}),s(t.getState()),r}const Ne="_container_3gwmx_1",Ae="_title_3gwmx_6",Se="_counter_3gwmx_31",rt={container:Ne,title:Ae,counter:Se};function ge(t){const e=h({className:rt.container}),n=({carsCount:r})=>{e.replaceChildren();const s=It({textContent:St.GARAGE,className:rt.title}),o=V({className:rt.counter,textContent:gt.CARS+String(r)});e.append(s,o)};return t.subscribe(C.COUNT_CHANGE,n),n(t.getState()),e}var G=(t=>(t.GARAGE="garage",t.WINNERS="winners",t))(G||{});function me(t){switch(t){case"garage":return"garage";case"winners":return"winners";default:return null}}function fe(t){const e={...t},n=new Ot;return{getState:()=>e,setPage:r=>{Object.assign(e,r),n.emit(C.PAGE_CHANGE,e)},setWinnersPage:r=>{Object.assign(e,r),n.emit(C.WINNERS_PAGE_CHANGE,e)},setCount:r=>{Object.assign(e,r),n.emit(C.COUNT_CHANGE,e)},updateState:r=>{Object.assign(e,r)},updateGarageStatus:r=>{e.garageStatus=r,n.emit(C.GARAGE_STATUS_CHANGE,e)},setAppPage:r=>{e.currentAppPage=r,e.garageStatus=S.READY,n.unsubscribeAll()},subscribe:(r,s)=>{n.subscribe(r,s)}}}const pe={currentCarsPage:w,carsCount:b,nameInputValue:ft,colorInputValue:Yt,carsOnCurrentPage:[],garageStatus:S.READY,currentWinnersPage:w,winnersCount:b,winnersOnCurrentPage:[],winnersCars:[],sortField:L.TIME,sortOrder:F.ASC,currentAppPage:G.GARAGE},ot=fe(pe);function Re({root:t,routes:e}){function n(){const r=globalThis.location.hash.replace(/#/,"")||G.GARAGE,s=me(r)??G.GARAGE,o=e[s];ot.setAppPage(s),_e(t,o)}globalThis.addEventListener("hashchange",n),n()}function Nt(t=G.GARAGE){globalThis.location.hash=t}function _e(t,e){t.replaceChildren(e())}const he="_container_rscl5_1",Ie={container:he};function yt(t){const e=h({className:Ie.container}),n=({garageStatus:r,currentAppPage:s})=>{e.replaceChildren();const o=r===S.RACING,a=N({textContent:p.GARAGE,onClick:()=>{Nt(G.GARAGE)},disabled:o||s===G.GARAGE}),i=N({textContent:p.WINNERS,onClick:()=>{Nt(G.WINNERS)},disabled:o||s===G.WINNERS});e.append(a,i)};return n(t.getState()),t.subscribe(C.GARAGE_STATUS_CHANGE,n),e}function lt(t,e){return Math.ceil(t/e)||w}function Pe(t,e,n){const r=t*n;return e<=r}function Ge(t){return t===w}function Oe(t,e,n){const r=lt(e,n);return t===r}function be(t,e,n){const r=lt(e,n);return t>r}const we="_container_zw9e1_1",De={container:we};function Lt(t,e,n){const r=h({className:De.container}),s=o=>{r.replaceChildren();const{currentPage:a,itemsCount:i,itemsPerPage:c,onPageChange:u,isDisabled:l}=e(o),d=u0({textContent:`${String(a)}/${String(lt(i,c))}`}),P=N({textContent:p.PREVIOUS,onClick:()=>{u(a-y)}}),W=N({textContent:p.NEXT,onClick:()=>{u(a+y)}});W.disabled=Oe(a,i,c)||l,P.disabled=Ge(a)||l,r.append(P,d,W)};for(const o of n)t.subscribe(o,s);return s(t.getState()),r}function ye(){const t=ut.map(()=>Math.floor(Math.random()*(B.MAX_RANDOM-B.MIN+B.OFFSET))+B.MIN),e=Math.floor(Math.random()*ut.length);return t[e]=B.MAX,`#${t.map(r=>r.toString(kt).padStart(Xt,zt)).join("")}`}async function Le(t){for(let e=b;e<We;e+=y){const n=wt(),r=ye();try{await t.addCar(n,r)}catch(s){I(s)}}}const We=100,He="_container_ijj89_1",ve={container:He};function $e(t,e,n){const r=h({className:ve.container}),s=({garageStatus:o,carsCount:a})=>{r.replaceChildren();const i=Me(o),c=N({textContent:"Generate cars",onClick:()=>{Le(e)},disabled:i.isGenerateDisabled}),u=N({textContent:"Start Race",onClick:()=>{n.race()},disabled:i.isRaceDisabled||a===b}),l=N({textContent:"Reset",onClick:()=>{n.reset()},disabled:i.isResetDisabled});r.append(c,u,l)};return s(t.getState()),t.subscribe(C.GARAGE_STATUS_CHANGE,s),t.subscribe(C.COUNT_CHANGE,s),t.subscribe(C.PAGE_CHANGE,()=>{n.resetOnPageChange()}),r}function Me(t){switch(t){case S.READY:return{isGenerateDisabled:!1,isRaceDisabled:!1,isResetDisabled:!0};case S.CARS_LEFT:return{isGenerateDisabled:!1,isRaceDisabled:!0,isResetDisabled:!1};case S.RACING:return{isGenerateDisabled:!0,isRaceDisabled:!0,isResetDisabled:!1}}}class xe{constructor(e){g(this,"store");this.store=e}async goToPage(e){const{cars:n,totalCount:r}=await f.getCars(e);this.store.updateState({carsOnCurrentPage:n}),this.store.setCount({carsCount:r}),this.store.setPage({currentCarsPage:e})}async addCar(e,n){await f.createCar(e,n);const{currentCarsPage:r,carsCount:s}=this.store.getState(),o=s+y;Pe(r,o,k)?await this.goToPage(r):this.store.setCount({carsCount:o})}async removeCar(e){await f.deleteCar(e),await f.deleteWinner(e);const{currentCarsPage:n,carsCount:r}=this.store.getState(),s=r-y,o=be(n,s,k)?n-y||w:n;await this.goToPage(o)}async editCar(e,n,r){await f.updateCar({id:e,name:n,color:r})}async returnCar(e){await f.stopCar(e)}}function Ue(t,e){f.createWinner(t,e).catch(()=>{Wt(t,e)})}function Wt(t,e){f.getWinner(t).then(n=>{const{id:r,wins:s,time:o}=n,a=Math.min(e,o);return f.updateWinner({id:r,wins:s+y,time:a})}).catch(I)}function Be(t,e,n,r){f.getWinners(e,n,r).then(async({winners:s,totalWinners:o})=>{const a=await Promise.all(s.map(i=>f.getCar(i.id)));t.setWinnersPage({winnersOnCurrentPage:s,winnersCount:o,winnersCars:a,currentWinnersPage:e,sortField:n,sortOrder:r})}).catch(I)}const v={registerWinner:Ue,updateWinner:Wt,setWinners:Be};class Fe{constructor(e){g(this,"controllers",new Map);g(this,"store");this.store=e}addController(e){this.controllers.set(e.id,e)}removeController(e){this.controllers.delete(e)}clearControllers(){this.controllers.clear()}race(){this.store.updateGarageStatus(S.RACING);const e=[...this.controllers.values()].map(r=>r.startCar(!0).then(()=>r.properties)),n=new Date;Promise.any(e).then(r=>{const o=(new Date().getTime()-n.getTime())/Kt,a=`${r.name} won in ${String(o.toFixed(pt))} seconds`;ct(V({},[a])),v.registerWinner(r.id,o)}).catch(r=>{r instanceof AggregateError||I(r)}),Promise.allSettled(e).finally(()=>{this.store.updateGarageStatus(S.CARS_LEFT)})}resetOnPageChange(){this.store.updateGarageStatus(S.READY)}reset(){const e=[...this.controllers.values()].map(n=>n.returnCar());Promise.allSettled(e).then(()=>{this.store.updateGarageStatus(S.READY)}).catch(I)}}const Ve="_form_tsqy0_1",Ye={form:Ve};function ke(t){const e=h({}),{currentCarsPage:n}=t.getState(),r=new xe(t);r.goToPage(n).catch(I);const s=yt(t),o=ge(t),a=new Fe(t),i=ze(r,a),c=Lt(t,i,[C.PAGE_CHANGE,C.COUNT_CHANGE,C.GARAGE_STATUS_CHANGE]),u=$e(t,r,a),l=Xe(t,r);e.append(s,o,u,l);const d=Te(t,r,a);return e.append(c,d),e}function Xe(t,e){const n=h({className:Ye.form}),r=(i,c)=>{e.addCar(i,c).catch(I)},s=i=>{t.updateState({nameInputValue:i})},o=i=>{t.updateState({colorInputValue:i})},a=i=>{n.replaceChildren();const{nameInputValue:c,colorInputValue:u,garageStatus:l}=i,d=l===S.RACING,P=Dt(p.ADD_CAR,r,c,u,{nameInputHandler:s,colorInputHandler:o},d);n.append(P)};return a(t.getState()),t.subscribe(C.GARAGE_STATUS_CHANGE,a),n}function ze(t,e){return n=>({currentPage:n.currentCarsPage,itemsCount:n.carsCount,itemsPerPage:k,onPageChange:r=>{t.goToPage(r).then(()=>{e.resetOnPageChange()}).catch(I)},isDisabled:n.garageStatus===S.RACING})}const Ke="_container_84aoz_1",je="_toggle_84aoz_10",Ht={container:Ke,toggle:je};function qe(t){const e=h({className:Ht.container});return(({sortField:r,sortOrder:s})=>{e.replaceChildren();const o=tn(t,r,s),a=Qe(t,r,s),i=Ze(t,r,s),c=Je(t,r,s);e.append(o,a,i,c)})(t.getState()),e}function Je(t,e,n){return N({textContent:Ut[n],onClick:()=>{const r=n===F.ASC?F.DESC:F.ASC;v.setWinners(t,w,e,r)},className:Ht.toggle})}function Ze(t,e,n){return N({textContent:p.WINS,onClick:()=>{v.setWinners(t,w,L.WINS,n)},disabled:e===L.WINS})}function Qe(t,e,n){return N({textContent:p.ID,onClick:()=>{v.setWinners(t,w,L.ID,n)},disabled:e===L.ID})}function tn(t,e,n){return N({textContent:p.TIME,onClick:()=>{v.setWinners(t,w,L.TIME,n)},disabled:e===L.TIME})}const en="_table_8k8c8_1",nn="_car_8k8c8_27",vt={table:en,car:nn};function rn(t,e,n){const r=d0({className:vt.table});return(()=>{const o=C0({}),a=Gt({});for(const c of Ft){const u=T0({textContent:c});a.append(u)}o.append(a),r.append(o);const i=E0({});sn(t,e,i),r.append(i)})(n.getState()),r}function sn(t,e,n){for(const[r,s]of t.entries()){const o=Gt({}),a=$({});a.textContent=`${String(r+y)}.`,o.append(a);const i=$({className:vt.car}),c=X(it,e[r].color,H.WIDTH,H.HEIGHT);i.append(c),o.append(i);const u=$({});u.textContent=`#${String(s.id)}`,o.append(u);const l=$({});l.textContent=e[r].name,o.append(l);const d=$({});d.textContent=String(s.wins),o.append(d);const P=$({});P.textContent=`${s.time.toFixed(pt)}s`,o.append(P),n.append(o)}}function on(t){const e=h({}),n=({winnersOnCurrentPage:r,winnersCars:s})=>{e.replaceChildren();const o=qe(t),a=rn(r,s,t);e.append(o,a)};return t.subscribe(C.WINNERS_PAGE_CHANGE,n),n(t.getState()),e}const an="_container_3gwmx_1",cn="_title_3gwmx_6",ln="_counter_3gwmx_31",st={container:an,title:cn,counter:ln};function un(t){const e=h({className:st.container});return(({winnersCount:r})=>{e.replaceChildren();const s=It({textContent:St.WINNERS,className:st.title}),o=V({className:st.counter,textContent:gt.WINNERS+String(r)});e.append(s,o)})(t.getState()),e}function dn(t){const e=h({}),n=En(t),{sortField:r,sortOrder:s,currentWinnersPage:o}=t.getState();return v.setWinners(t,o,r,s),(()=>{e.replaceChildren();const i=yt(t),c=un(t),u=Lt(t,n,[C.WINNERS_PAGE_CHANGE]),l=on(t);e.append(i,c,u,l)})(t.getState()),e}function En(t){return e=>({currentPage:e.currentWinnersPage,itemsCount:e.winnersCount,itemsPerPage:Rt,onPageChange:n=>{v.setWinners(t,n,e.sortField,e.sortOrder)},isDisabled:!1})}function Cn(){const t=c0({className:S0.main}),e=l0({});t.append(e),document.body.append(t),Re({root:e,routes:{[G.GARAGE]:()=>ke(ot),[G.WINNERS]:()=>dn(ot)}})}Cn();
